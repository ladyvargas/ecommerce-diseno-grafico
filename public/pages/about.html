<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sobre Nosotros - CNC CAMPAS</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/main-about.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/whatsapp-float.css">
    <style>
        header.header {
            display: none !important;
        }
    </style>
</head>

<body>
    <a id="whatsappFloat" href="#" target="_blank" class="whatsapp-float" title="Contáctanos por WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>
    <section class="hero">
        <div class="hero-content" data-aos="fade-up">
            <h1 class="hero-title">Sobre CNC CAMPAS</h1>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container">
        <!-- Nuestra Historia -->
        <section class="section" data-aos="fade-up">
            <h2 class="section-title">Nuestra Historia</h2>
            <div class="section-content" id="historyContent">
                <div class="loading"><i class="fas fa-spinner fa-spin"></i> Cargando...</div>
            </div>
        </section>

        <!-- Nuestros Valores -->
        <section class="section" data-aos="fade-up">
            <div class="values-grid">

                <div class="value-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="value-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <h3 class="value-title" id="misionTitle">MISIÓN</h3>
                    <p class="value-description" id="missionContent">
                    <div class="loading" style="padding: 1rem;">Cargando...</div>
                    </p>
                </div>

                <div class="value-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="value-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3 class="value-title" id="visionTitle">VISIÓN</h3>
                    <p class="value-description" id="visionContent">
                    <div class="loading" style="padding: 1rem;">Cargando...</div>
                    </p>
                </div>
            </div>
        </section>

        <!-- Equipo -->
        <section class="section" data-aos="fade-up">
            <h2 class="section-title">Nuestro Equipo</h2>
            <div class="team-grid" id="teamContainer">
                <div class="loading"><i class="fas fa-spinner fa-spin"></i> Cargando equipo...</div>
            </div>
        </section>

        <!-- CTA -->
        <div class="cta-section" data-aos="fade-up">
            <h2 class="cta-title">¿Listo para Crear Algo Increíble?</h2>
            <p class="cta-description">
                Únete a miles de diseñadores que confían en CNC CAMPAS para sus proyectos
            </p>
            <a href="/" class="btn btn-white">
                <i class="fas fa-rocket"></i>
                Explorar Recursos
            </a>
        </div>
    </div>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
        AOS.init({
            duration: 800,
            easing: 'ease-out-cubic',
            once: true,
            offset: 100
        });

        const API_URL = "https://ecommerce-diseno-grafico-production.up.railway.app/api";

        async function loadAboutFromAPI() {
            try {
                const res = await fetch(`${API_URL}/about`, { cache: "no-store" });
                if (!res.ok) {
                    const text = await res.text();
                    console.error("API ABOUT ERROR:", res.status, text);
                    throw new Error("No se pudo cargar About desde API");
                }
                const data = await res.json();

                // HERO
                const heroTitle = document.getElementById("heroTitle");
                if (heroTitle) heroTitle.textContent = data.hero_title || "Sobre CNC CAMPAS";

                // TITULOS
                const historiaTitle = document.getElementById("historiaTitle");
                if (historiaTitle) historiaTitle.textContent = data.historia_title || "Nuestra Historia";

                const misionTitle = document.getElementById("misionTitle");
                if (misionTitle) misionTitle.textContent = data.mision_title || "MISIÓN";

                const visionTitle = document.getElementById("visionTitle");
                if (visionTitle) visionTitle.textContent = data.vision_title || "VISIÓN";

                const teamTitle = document.getElementById("teamTitle");
                if (teamTitle) teamTitle.textContent = data.team_title || "Nuestro Equipo";

                // HISTORIA
                const historyDiv = document.getElementById("historyContent");
                historyDiv.innerHTML = data.historia_html || "<p style='color:#999'>Sin historia configurada</p>";

                // MISION / VISION
                document.getElementById("missionContent").innerHTML = data.mision_text || "<p style='color:#999'>Sin misión configurada</p>";
                document.getElementById("visionContent").innerHTML = data.vision_text || "<p style='color:#999'>Sin visión configurada</p>";

                // EQUIPO
                const teamContainer = document.getElementById("teamContainer");
                const team = data.team || [];
                if (team.length > 0) {
                    teamContainer.innerHTML = team.map(member => `
                        <div class="team-member" data-aos="fade-up">
                            <div class="team-avatar">
                                <i class="fas ${member.icon_class || 'fa-user'}"></i>
                            </div>
                            <h3 class="team-name">${member.name}</h3>
                            <p class="team-role">${member.role}</p>
                            <p class="team-bio">${member.bio || ''}</p>
                        </div>
                    `).join('');
                } else {
                    teamContainer.innerHTML = `<p style="color:#999; text-align:center; padding:2rem; grid-column:1/-1;">No hay miembros del equipo configurados</p>`;
                }

            } catch (err) {
                console.error("Error cargando About:", err);
                document.getElementById("historyContent").innerHTML =
                    `<p style="color:red;text-align:center;padding:2rem;">Error cargando About desde API</p>`;
            }
        }

        loadAboutFromAPI();
    </script>

    <!-- ✨ SCRIPTS ESTANDARIZADOS -->
    <script src="/js/whatsapp-float.js"></script>
    <script src="/js/common-header.js"></script>
    <script src="/js/apply-colors.js"></script>
    <script src="/js/common-footer.js"></script>
</body>

</html>